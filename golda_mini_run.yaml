SETTINGS:
  name: GB200

VARS:
  CLUSTER_NAME: "GLODA"
  CONFIGURATION: "RDMA_BF3_MINI_RUN_NICFW_32_42_1000_DOCA_086000"
  #CONFIGURATION: "new_RDMA_CX8_MINI_RUN_NICFW_45_5014_DOCA_058452_MRC_0177_GPU_RC_33"
  TAGS: "REL2A_MINI_Regression"

  INTERFACE: roce_rail1,roce_rail2,roce_rail3,roce_rail4
  NICS: roce_rail1,roce_rail2,roce_rail3,roce_rail4

#  RACK_A: "gb-nvl-yok-03-compute[07-08]"
  RACK_A: "gb-nvl-yok-03-compute[03]"
  RACK_B: "gb-nvl-yok-03-compute[08]"
  SERVERS: "gb-nvl-yok-03-compute[07-08]"
  CLIENTS: "gb-nvl-yok-04-compute[07-08]"
  SLURM_PARTITION: "gb200-golda"

  NODE_EXP_BW: 390
  RACK_EXP_BW: 390
  NO_MNNVL_EXP_BW: 390
  NO_NVLINK_EXP_BW: 55

  CONTAINER: "/mnt/lustre/cloudai/cloudai_1.1/install/nvcr.io_nvidia__pytorch__25.02-py3.sqsh"
  NCCL_SOCKET: "enP5p9s0"
  MELLANOX_VISIBLE_DEVICES: 0,1,4,5
  CUDA_VISIBLE_DEVICES: 0,1,2,3
  NCCL_IB_HCA: mlx5_0:1,mlx5_1:1,mlx5_4:1,mlx5_5:1
  KEEP_NICS: 'roce_rail[1-4]'
  NTASKS_PER_NODE: 4
  NUM_GPUS: 4

JOBS:
# - rdma_health_check.yaml --CLUSTER_NAME={CLUSTER_NAME} --CONFIGURATION={CONFIGURATION} --TAGS={TAGS} --INTERFACE={INTERFACE} --NICS={NICS} --RACK_A={RACK_A} --RACK_B={RACK_B} --SLURM_PARTITION={SLURM_PARTITION} --KEEP_NICS={RDMA_NICS} --SERVERS={SERVERS} --CLIENTS={CLIENTS}

- node_nccl_health_check.yaml --CLUSTER_NAME={CLUSTER_NAME} --CONFIGURATION={CONFIGURATION} --TAGS={TAGS} --INTERFACE={INTERFACE} --RACK_A={RACK_A} --RACK_B={RACK_B} --CONTAINER={CONTAINER}
  --SLURM_PARTITION={SLURM_PARTITION} --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES} --NCCL_EXP_BW={NODE_EXP_BW}
  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}

#- rack_nccl_health_check.yaml --CLUSTER_NAME={CLUSTER_NAME} --CONFIGURATION={CONFIGURATION} --TAGS={TAGS} --INTERFACE={INTERFACE} --RACK_A={RACK_A}  --RACK_B={RACK_B} --CONTAINER={CONTAINER}
#  --SLURM_PARTITION={SLURM_PARTITION} --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES} --NCCL_EXP_BW={NODE_EXP_BW}
#  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}
#
#- rack_wo_mnnvl_health_check.yaml --CLUSTER_NAME={CLUSTER_NAME} --CONFIGURATION={CONFIGURATION} --TAGS={TAGS} --INTERFACE={INTERFACE} --RACK_A={RACK_A}  --RACK_B={RACK_B} --CONTAINER={CONTAINER}
#  --SLURM_PARTITION={SLURM_PARTITION} --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES} --NCCL_EXP_BW={NO_MNNVL_EXP_BW}
#  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}
#
#- rack_wo_nvlink_health_check.yaml --CLUSTER_NAME={CLUSTER_NAME} --CONFIGURATION={CONFIGURATION} --TAGS={TAGS} --INTERFACE={INTERFACE} --RACK_A={RACK_A}  --RACK_B={RACK_B} --CONTAINER={CONTAINER}
#  --SLURM_PARTITION={SLURM_PARTITION} --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES} --NCCL_EXP_BW={NO_NVLINK_EXP_BW}
#  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}
