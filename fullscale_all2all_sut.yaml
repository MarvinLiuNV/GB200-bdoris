SETTINGS:
  name: fullscale_wo_nvlink

VARS:
  CLUSTER_NAME: ""
  CONFIGURATION: ""
  TAGS: ""
  BENCHMARK: "NCCL_All_To_All_SUT"
  NCCL_JOB: nccl_all_to_all

  CUDA_VISIBLE_DEVICES: ""
  NCCL_IB_HCA: ""
  MONITOR_INTERFACE: ""
  NCCL_EXP_BW: 1000

  NUM_GPUS: 4
  NTASKS_PER_NODE: 4
  CONTAINER: ""
  SLURM_PARTITION: ""
  NCCL_SOCKET: ""
  MELLANOX_VISIBLE_DEVICES: ""
  HOSTS: ""
  NCCL_MNNVL_ENABLE: 0
  NCCL_P2P_DISABLE: 0
  NCCL_SHM_DISABLE: 0
  NCCL_PXN_DISABLE: 0
  NCCL_P2P_PXN_LEVEL: 0
  NCCL_IB_DISABLE: 0
  NCCL_NVLS_ENABLE: 1

  SPLIT_MASK: 0x3

  SERVERS: ""
  CLIENTS: ""
  MONITOR_INTERFACE: ""
  NICS: ""
  KEEP_NICS: ""

  QPS: 4
  MSG: 65536
  BDIR: true
  IMMIDIATE: false
  IPv6: false
  EXP_CUDA: false  

JOBS:
- monitor.yaml --INTERFACE={MONITOR_INTERFACE} &
  fullscale_nccl_job.yaml --NCCL_JOB={NCCL_JOB}
  --NCCL_MNNVL_ENABLE={NCCL_MNNVL_ENABLE}
  --CONTAINER={CONTAINER} --SLURM_PARTITION={SLURM_PARTITION} --NCCL_EXP_BW={NCCL_EXP_BW}
  --CONFIGURATION={CONFIGURATION} --CLUSTER_NAME={CLUSTER_NAME} --TAGS={TAGS} --BENCHMARK={BENCHMARK}
  --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES} --SPLIT_TMASK={SPLIT_MASK}
  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}
  --NCCL_P2P_DISABLE={NCCL_P2P_DISABLE} --NCCL_SHM_DISABLE={NCCL_SHM_DISABLE} --NCCL_PXN_DISABLE={NCCL_PXN_DISABLE} --NCCL_P2P_PXN_LEVEL={NCCL_P2P_PXN_LEVEL}
  --NCCL_IB_DISABLE={NCCL_IB_DISABLE} --NCCL_NVLS_ENABLE={NCCL_NVLS_ENABLE}
  --HOSTS={HOSTS} --JOB_ID=1 &
  rdma_write.yaml --QPS={QPS} --MSG={MSG} --BDIR={BDIR} --HOSTS={RACK_A} --NUM_NODES={NUM_NODES} --NICS={NICS} --IMMIDIATE={IMMIDIATE} --IPv6={IPv6}
  --TOPOLOGY_TYPE=O2O_UNI --EXP_CUDA={EXP_CUDA} --SLURM_PARTITION={SLURM_PARTITION} --KEEP_NICS={KEEP_NICS} --SERVERS={SERVERS} --CLIENTS={CLIENTS}
