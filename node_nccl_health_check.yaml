SETTINGS:
  name: nccl_health_check

VARS:
  CLUSTER_NAME: ""
  CONFIGURATION: ""
  TAGS: ""
  BENCHMARK: "NCCL_All_To_All_Compute_Node_Health_Check"

  MONITOR_INTERFACE: ""
  NCCL_EXP_BW: 10

  NUM_GPUS: 4
  NTASKS_PER_NODE: 4
  CONTAINER: ""
  SLURM_PARTITION: ""
  NCCL_SOCKET: ""
  MELLANOX_VISIBLE_DEVICES: ""
  CUDA_VISIBLE_DEVICES: ""
  NCCL_IB_HCA: ""

JOBS:
- monitor.yaml --INTERFACE={MONITOR_INTERFACE} &
  node_nccl_all2all.yaml
  --CONTAINER={CONTAINER} --SLURM_PARTITION={SLURM_PARTITION} --NCCL_EXP_BW={NCCL_EXP_BW}
  --CONFIGURATION={CONFIGURATION} --CLUSTER_NAME={CLUSTER_NAME} --TAGS={TAGS} --BENCHMARK={BENCHMARK}
  --NCCL_SOCKET={NCCL_SOCKET} --MELLANOX_VISIBLE_DEVICES={MELLANOX_VISIBLE_DEVICES}
  --CUDA_VISIBLE_DEVICES={CUDA_VISIBLE_DEVICES} --NCCL_IB_HCA={NCCL_IB_HCA} --NTASKS_PER_NODE={NTASKS_PER_NODE} --NUM_GPUS={NUM_GPUS}